#!/bin/bash

# STOP PREVIOUS SERVERS
# ---------------------
~/Steam/st600760/stop >> /dev/null 2>&1

# VARIABLES
# ---------
SECURE=$(cat ~/Steam/st600760/config | grep secure: | awk '{ print $2 }')
WORLDNAME=$(cat ~/Steam/st600760/config | grep worldname: | awk '{ print $2 }')
WORLDTYPE=$(cat ~/Steam/st600760/config | grep worldtype: | awk '{ print $2 }')
PASSWORD=$(cat ~/Steam/st600760/config | grep password: | awk '{ print $2 }')
SERVERNAME=$(cat ~/Steam/st600760/config | grep servername: | awk '{ print $2 }')

#########################################################################################################################

if [ $SECURE = yes ]
then
	echo "------------------------------------------"
	echo
	echo "Secure: yes"
	echo "Name: $WORLDNAME"
	echo "Type $WORLDTYPE"
	echo "Password: $PASSWORD"
	echo "Servername: $SERVERNAME"
	echo
	echo "------------------------------------------"

	~/Steam/steamapps/common/Stationeers\ Dedicated\ Server/rocketstation_DedicatedServer.x86_64 \
        -autostart \
        -batchmode \
        -nographics \
        -password=$PASSWORD \
        -autosaveinterval=300 \
        -clearallinterval=65535 \
        -loadworld=$WORLDNAME \
        -worldtype=$WORLDTYPE \
        -worldname=$WORLDNAME \
        -servername=$SERVERNAME \
        -basedirectory=server/ \
        &
elif [ $SECURE = y ]
then
	echo "------------------------------------------"
	echo
	echo "Secure: yes"
	echo "Name: $WORLDNAME"
	echo "Type $WORLDTYPE"
	echo "Password: $PASSWORD"
	echo "Servername: $SERVERNAME"
	echo
	echo "------------------------------------------"

	~/Steam/steamapps/common/Stationeers\ Dedicated\ Server/rocketstation_DedicatedServer.x86_64 \
        -autostart \
        -batchmode \
        -nographics \
        -password=$PASSWORD \
        -autosaveinterval=300 \
        -clearallinterval=65535 \
        -loadworld=$WORLDNAME \
        -worldtype=$WORLDTYPE \
        -worldname=$WORLDNAME \
        -servername=$SERVERNAME \
        -basedirectory=server/ \
        &
elif [ $SECURE = no ]
then
	echo "------------------------------------------"
	echo
	echo "Secure: no"
	echo "Name: $WORLDNAME"
	echo "Type $WORLDTYPE"
	echo "Servername: $SERVERNAME"
	echo
	echo "------------------------------------------"

	~/Steam/steamapps/common/Stationeers\ Dedicated\ Server/rocketstation_DedicatedServer.x86_64 \
        -autostart \
        -batchmode \
        -nographics \
        -autosaveinterval=300 \
        -clearallinterval=65535 \
        -loadworld=$WORLDNAME \
        -worldtype=$WORLDTYPE \
        -worldname=$WORLDNAME \
        -servername=$SERVERNAME \
        -basedirectory=server/ \
        &
elif [ $SECURE = n ]
then
	echo "------------------------------------------"
	echo
	echo "Secure: no"
	echo "Name: $WORLDNAME"
	echo "Type $WORLDTYPE"
	echo "Servername: $SERVERNAME"
	echo
	echo "------------------------------------------"

	~/Steam/steamapps/common/Stationeers\ Dedicated\ Server/rocketstation_DedicatedServer.x86_64 \
        -autostart \
        -batchmode \
        -nographics \
        -autosaveinterval=300 \
        -clearallinterval=65535 \
        -loadworld=$WORLDNAME \
        -worldtype=$WORLDTYPE \
        -worldname=$WORLDNAME \
        -servername=$SERVERNAME \
        -basedirectory=server/ \
        &
else
        echo " NO SETTINGS"
fi
